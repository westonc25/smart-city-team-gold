# Smart City Mobile App

This is the mobile application for the Smart City project, built with [Expo](https://expo.dev) and [React Native](https://reactnative.dev).

## ðŸš€ Getting Started

### 1. Prerequisites
- [Node.js](https://nodejs.org/) (LTS version recommended)
- [Bun](https://bun.sh/) (Package Manager)
- **Mapbox Access Tokens** (Required for maps)

### 2. Environment Setup (CRITICAL)
You must create a `.env` file in the `mobile/` directory with the following keys. 
Ask the team lead for the secret token value.

```bash
# mobile/.env

# Public Token (Safe to share, used for rendering maps)
EXPO_PUBLIC_MAPBOX_TOKEN=pk.eyJ1Ijoic21hcnRjaXR5dGVhbTIiLCJhIjoiY21sY3JuamE4MTF6ZDJxc2E5Nnh6aWwwOCJ9.wJv-qEw6z8kKz8Z1YxY6Yg

# Secret Download Token (DO NOT COMMIT, used for installing Mapbox SDK)
# Required for Android/iOS builds
RNMAPBOX_MAPS_DOWNLOAD_TOKEN=sk.INSERT_SECRET_TOKEN_HERE
```

### 3. Installation
Install dependencies:
```bash
cd mobile
bun install
```

---

## ðŸ“± Running the App

### IMPORTANT: Do NOT use "Expo Go"
This app uses **Mapbox**, which includes native code. The standard "Expo Go" app from the App Store **will not work**. 
You must use a **Development Build**.

### Option A: Android Emulator (Recommended for Windows)
1.  Ensure **Android Studio** is installed and an Emulator is running.
2.  Run the development build:
    ```bash
    npx expo run:android
    ```

### Option B: Physical Android Device
1.  Allow installing apps from unknown sources on your phone.
2.  Scan the QR code generated by the build command, or install the APK manually.
3.  Start the development server:
    ```bash
    npx expo start --dev-client
    ```

### Option C: iOS (Mac Only)
1.  Run the ios build (requires Xcode):
    ```bash
    npx expo run:ios
    ```

---

## ðŸ›  Troubleshooting

### "401 Unauthorized" during build
- This means your `RNMAPBOX_MAPS_DOWNLOAD_TOKEN` is missing, invalid, or lacks the `DOWNLOADS:READ` scope.
- Check your `.env` file and Ensure your Mapbox token has the `DOWNLOADS:READ` scope enabled.

### "Module not found: @rnmapbox/maps"
- If you switched branches or pulled generic updates, you might need to reinstall dependencies.
- Run: `rm -rf node_modules && bun install`

### Map not loading (White screen)
- Check that `EXPO_PUBLIC_MAPBOX_TOKEN` is loaded correctly.
- Ensure your device has internet access.
